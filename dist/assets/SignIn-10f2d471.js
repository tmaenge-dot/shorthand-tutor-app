import{b as e,B as r,j as s,W as a,T as i,l as o,at as t}from"./mui-f67195f8.js";import{r as n}from"./vendor-71f819f8.js";import{c as l,a as d,u as m,o as c}from"./index.esm-ffee17e0.js";import{u}from"./index-a058ca40.js";import{z as p}from"./utils-6bbf63f7.js";import{a as h}from"./router-dd2b36d2.js";import"./firebase-a0f82ea0.js";const f=l().shape({email:d().email("Invalid email").required("Email is required"),password:d().required("Password is required")}),g=({onSuccess:l})=>{var d,g;const{login:b,currentUser:x}=u(),v=h(),{register:y,handleSubmit:w,formState:{errors:j,isSubmitting:S}}=m({resolver:c(f)});if(n.useEffect(()=>{x&&!x.isGuest&&setTimeout(()=>{v("/dashboard",{replace:!0})},100)},[x,v]),x&&!x.isGuest)return e(r,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:2,p:4,minHeight:"50vh"},children:[s(a,{}),s(i,{variant:"h6",color:"primary",children:"Already signed in!"}),s(i,{variant:"body2",color:"text.secondary",children:"Redirecting to dashboard..."}),s(o,{variant:"contained",onClick:()=>v("/dashboard",{replace:!0}),sx:{mt:2},children:"Go to Dashboard Now"})]});return e(r,{component:"form",onSubmit:w(async e=>{try{await b(e.email,e.password),p.success("Signed in successfully!"),l?l():v("/dashboard")}catch(r){p.error(r.message||"Sign-in failed")}}),sx:{display:"flex",flexDirection:"column",gap:2},children:[s(i,{variant:"h6",children:"Sign In"}),s(t,{label:"Email",...y("email"),error:!!j.email,helperText:null==(d=j.email)?void 0:d.message}),s(t,{label:"Password",type:"password",...y("password"),error:!!j.password,helperText:null==(g=j.password)?void 0:g.message}),s(o,{type:"submit",variant:"contained",disabled:S,children:"Sign In"})]})};export{g as default};
