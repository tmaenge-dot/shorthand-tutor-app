import{b as e,B as n,T as a,j as l,w as i,l as r,V as t,bc as s,X as c,F as d,a5 as o,N as h,O as m,bt as p,a1 as u,bj as f,bl as v,x as g,ae as b,$ as y,h as x,L as R,c as O,f as I,D as C,a2 as w,a3 as j,a4 as k,aa as E}from"./mui-f67195f8.js";import{r as F,a as N}from"./vendor-71f819f8.js";const S=()=>{var S,U,L;const[H,z]=F.useState([]),[D,W]=F.useState(!1),[B,T]=F.useState(null);F.useEffect(()=>{$()},[]);const $=()=>{try{const e=JSON.parse(localStorage.getItem("learner_feedback")||"[]");z(e)}catch(e){}},A=(()=>{if(0===H.length)return null;return{avgOverallRating:H.reduce((e,n)=>e+n.overallRating,0)/H.length,avgEaseOfUse:H.reduce((e,n)=>e+n.easeOfUse,0)/H.length,effectivenessCount:H.reduce((e,n)=>(e[n.effectiveness]=(e[n.effectiveness]||0)+1,e),{}),recommendationCount:H.reduce((e,n)=>(e[n.wouldRecommend]=(e[n.wouldRecommend]||0)+1,e),{}),topFeatures:H.reduce((e,n)=>(n.features.forEach(n=>{e[n]=(e[n]||0)+1}),e),{}),totalResponses:H.length}})();return e(n,{sx:{p:3},children:[e(n,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e(a,{variant:"h4",display:"flex",alignItems:"center",gap:1,children:[l(i,{color:"primary"}),"Learner Feedback Analytics"]}),e(n,{children:[l(r,{startIcon:l(t,{}),onClick:$,sx:{mr:1},children:"Refresh"}),l(r,{variant:"contained",startIcon:l(s,{}),onClick:()=>{const e=JSON.stringify(H,null,2),n=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(n),l=document.createElement("a");l.href=a,l.download=`learner_feedback_${(new Date).toISOString().split("T")[0]}.json`,l.click()},disabled:0===H.length,children:"Export Data"})]})]}),0===H.length?l(c,{severity:"info",children:"No feedback collected yet. The feedback system is active and waiting for learner responses."}):e(d,{children:[e(o,{container:!0,spacing:3,mb:4,children:[l(o,{item:!0,xs:12,md:3,children:l(h,{children:e(m,{children:[e(n,{display:"flex",alignItems:"center",gap:1,mb:1,children:[l(p,{color:"primary"}),l(a,{variant:"h6",children:"Total Responses"})]}),l(a,{variant:"h3",color:"primary",children:A.totalResponses})]})})}),l(o,{item:!0,xs:12,md:3,children:l(h,{children:e(m,{children:[e(n,{display:"flex",alignItems:"center",gap:1,mb:1,children:[l(u,{color:"primary"}),l(a,{variant:"h6",children:"Avg Rating"})]}),e(n,{display:"flex",alignItems:"center",gap:1,children:[l(a,{variant:"h3",color:"primary",children:A.avgOverallRating.toFixed(1)}),l(f,{value:A.avgOverallRating,readOnly:!0,size:"small"})]})]})})}),l(o,{item:!0,xs:12,md:3,children:l(h,{children:e(m,{children:[e(n,{display:"flex",alignItems:"center",gap:1,mb:1,children:[l(v,{color:"primary"}),l(a,{variant:"h6",children:"Ease of Use"})]}),e(n,{display:"flex",alignItems:"center",gap:1,children:[l(a,{variant:"h3",color:"primary",children:A.avgEaseOfUse.toFixed(1)}),l(f,{value:A.avgEaseOfUse,readOnly:!0,size:"small"})]})]})})}),l(o,{item:!0,xs:12,md:3,children:l(h,{children:e(m,{children:[e(n,{display:"flex",alignItems:"center",gap:1,mb:1,children:[l(g,{color:"primary"}),l(a,{variant:"h6",children:"Would Recommend"})]}),e(a,{variant:"h3",color:"primary",children:[Math.round(((A.recommendationCount.definitely||0)+(A.recommendationCount.probably||0))/A.totalResponses*100),"%"]})]})})})]}),e(o,{container:!0,spacing:3,mb:4,children:[l(o,{item:!0,xs:12,md:6,children:e(b,{sx:{p:2},children:[l(a,{variant:"h6",gutterBottom:!0,children:"Learning Effectiveness"}),Object.entries(A.effectivenessCount).map(([i,r])=>e(n,{mb:1,children:[e(n,{display:"flex",justifyContent:"space-between",mb:.5,children:[l(a,{variant:"body2",sx:{textTransform:"capitalize"},children:i.replace("-"," ")}),e(a,{variant:"body2",children:[r," responses"]})]}),l(y,{variant:"determinate",value:r/A.totalResponses*100,sx:{height:8,borderRadius:4}})]},i))]})}),l(o,{item:!0,xs:12,md:6,children:e(b,{sx:{p:2},children:[l(a,{variant:"h6",gutterBottom:!0,children:"Most Helpful Features"}),l(n,{display:"flex",flexWrap:"wrap",gap:1,children:Object.entries(A.topFeatures).sort(([,e],[,n])=>n-e).slice(0,6).map(([e,n])=>l(x,{label:`${e} (${n})`,color:"primary",variant:"outlined"},e))})]})})]}),e(b,{sx:{p:2},children:[l(a,{variant:"h6",gutterBottom:!0,children:"Individual Responses"}),l(R,{children:H.map((i,r)=>{var t,s,c;return e(N.Fragment,{children:[l(O,{button:!0,onClick:()=>{T(i),W(!0)},children:l(I,{primary:e(n,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e(n,{display:"flex",alignItems:"center",gap:2,children:[l(f,{value:i.overallRating,readOnly:!0,size:"small"}),l(x,{label:(null==(t=i.effectiveness)?void 0:t.replace("-"," "))||"N/A",size:"small",color:(null==(s=i.effectiveness)?void 0:s.includes("very-effective"))?"success":(null==(c=i.effectiveness)?void 0:c.includes("effective"))?"primary":"default"})]}),l(a,{variant:"caption",children:new Date(i.timestamp).toLocaleDateString()})]}),secondary:i.mostHelpful&&i.mostHelpful.length>0?`Most helpful: ${i.mostHelpful.substring(0,100)}...`:"No specific feedback provided"})}),r<H.length-1&&l(C,{})]},i.sessionId||r)})})]})]}),e(w,{open:D,onClose:()=>W(!1),maxWidth:"md",fullWidth:!0,children:[l(j,{children:"Detailed Feedback"}),l(k,{children:B&&l(n,{sx:{py:2},children:e(o,{container:!0,spacing:2,children:[e(o,{item:!0,xs:6,children:[l(a,{variant:"subtitle2",children:"Overall Rating:"}),l(f,{value:B.overallRating,readOnly:!0})]}),e(o,{item:!0,xs:6,children:[l(a,{variant:"subtitle2",children:"Ease of Use:"}),l(f,{value:B.easeOfUse,readOnly:!0})]}),e(o,{item:!0,xs:12,children:[l(a,{variant:"subtitle2",children:"Learning Effectiveness:"}),l(a,{children:null==(S=B.effectiveness)?void 0:S.replace("-"," ")})]}),e(o,{item:!0,xs:12,children:[l(a,{variant:"subtitle2",children:"Helpful Features:"}),l(n,{display:"flex",flexWrap:"wrap",gap:1,mt:1,children:null==(U=B.features)?void 0:U.map(e=>l(x,{label:e,size:"small"},e))})]}),e(o,{item:!0,xs:12,children:[l(a,{variant:"subtitle2",children:"Learning Progress:"}),l(a,{children:B.learningProgress||"Not provided"})]}),e(o,{item:!0,xs:12,children:[l(a,{variant:"subtitle2",children:"Most Helpful Feature:"}),l(a,{children:B.mostHelpful||"Not provided"})]}),e(o,{item:!0,xs:12,children:[l(a,{variant:"subtitle2",children:"Would Recommend:"}),l(a,{children:null==(L=B.wouldRecommend)?void 0:L.replace("-"," ")})]}),e(o,{item:!0,xs:12,children:[l(a,{variant:"subtitle2",children:"Suggested Improvements:"}),l(a,{children:B.improvements||"None provided"})]}),e(o,{item:!0,xs:12,children:[l(a,{variant:"subtitle2",children:"Additional Comments:"}),l(a,{children:B.comments||"None provided"})]})]})})}),l(E,{children:l(r,{onClick:()=>W(!1),children:"Close"})})]})]})};export{S as default};
