import{a as e,B as n,b as a,j as i,t as l,e as r,K as t,b8 as s,O as c,F as d,a1 as o,z as h,I as m,bp as p,Z as u,bf as f,bh as v,u as g,ab as b,X as y,C as x,i as R,k as O,n as I,h as C,_ as k,$ as w,a0 as j,a6 as E}from"./mui-dbc2381b.js";import{r as F,a as S}from"./vendor-71f819f8.js";const N=()=>{var N,U,z;const[H,L]=F.useState([]),[W,B]=F.useState(!1),[D,$]=F.useState(null);F.useEffect(()=>{A()},[]);const A=()=>{try{const e=JSON.parse(localStorage.getItem("learner_feedback")||"[]");L(e)}catch(e){}},M=(()=>{if(0===H.length)return null;return{avgOverallRating:H.reduce((e,n)=>e+n.overallRating,0)/H.length,avgEaseOfUse:H.reduce((e,n)=>e+n.easeOfUse,0)/H.length,effectivenessCount:H.reduce((e,n)=>(e[n.effectiveness]=(e[n.effectiveness]||0)+1,e),{}),recommendationCount:H.reduce((e,n)=>(e[n.wouldRecommend]=(e[n.wouldRecommend]||0)+1,e),{}),topFeatures:H.reduce((e,n)=>(n.features.forEach(n=>{e[n]=(e[n]||0)+1}),e),{}),totalResponses:H.length}})();return e(n,{sx:{p:3},children:[e(n,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e(a,{variant:"h4",display:"flex",alignItems:"center",gap:1,children:[i(l,{color:"primary"}),"Learner Feedback Analytics"]}),e(n,{children:[i(r,{startIcon:i(t,{}),onClick:A,sx:{mr:1},children:"Refresh"}),i(r,{variant:"contained",startIcon:i(s,{}),onClick:()=>{const e=JSON.stringify(H,null,2),n=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(n),i=document.createElement("a");i.href=a,i.download=`learner_feedback_${(new Date).toISOString().split("T")[0]}.json`,i.click()},disabled:0===H.length,children:"Export Data"})]})]}),0===H.length?i(c,{severity:"info",children:"No feedback collected yet. The feedback system is active and waiting for learner responses."}):e(d,{children:[e(o,{container:!0,spacing:3,mb:4,children:[i(o,{item:!0,xs:12,md:3,children:i(h,{children:e(m,{children:[e(n,{display:"flex",alignItems:"center",gap:1,mb:1,children:[i(p,{color:"primary"}),i(a,{variant:"h6",children:"Total Responses"})]}),i(a,{variant:"h3",color:"primary",children:M.totalResponses})]})})}),i(o,{item:!0,xs:12,md:3,children:i(h,{children:e(m,{children:[e(n,{display:"flex",alignItems:"center",gap:1,mb:1,children:[i(u,{color:"primary"}),i(a,{variant:"h6",children:"Avg Rating"})]}),e(n,{display:"flex",alignItems:"center",gap:1,children:[i(a,{variant:"h3",color:"primary",children:M.avgOverallRating.toFixed(1)}),i(f,{value:M.avgOverallRating,readOnly:!0,size:"small"})]})]})})}),i(o,{item:!0,xs:12,md:3,children:i(h,{children:e(m,{children:[e(n,{display:"flex",alignItems:"center",gap:1,mb:1,children:[i(v,{color:"primary"}),i(a,{variant:"h6",children:"Ease of Use"})]}),e(n,{display:"flex",alignItems:"center",gap:1,children:[i(a,{variant:"h3",color:"primary",children:M.avgEaseOfUse.toFixed(1)}),i(f,{value:M.avgEaseOfUse,readOnly:!0,size:"small"})]})]})})}),i(o,{item:!0,xs:12,md:3,children:i(h,{children:e(m,{children:[e(n,{display:"flex",alignItems:"center",gap:1,mb:1,children:[i(g,{color:"primary"}),i(a,{variant:"h6",children:"Would Recommend"})]}),e(a,{variant:"h3",color:"primary",children:[Math.round(((M.recommendationCount.definitely||0)+(M.recommendationCount.probably||0))/M.totalResponses*100),"%"]})]})})})]}),e(o,{container:!0,spacing:3,mb:4,children:[i(o,{item:!0,xs:12,md:6,children:e(b,{sx:{p:2},children:[i(a,{variant:"h6",gutterBottom:!0,children:"Learning Effectiveness"}),Object.entries(M.effectivenessCount).map(([l,r])=>e(n,{mb:1,children:[e(n,{display:"flex",justifyContent:"space-between",mb:.5,children:[i(a,{variant:"body2",sx:{textTransform:"capitalize"},children:l.replace("-"," ")}),e(a,{variant:"body2",children:[r," responses"]})]}),i(y,{variant:"determinate",value:r/M.totalResponses*100,sx:{height:8,borderRadius:4}})]},l))]})}),i(o,{item:!0,xs:12,md:6,children:e(b,{sx:{p:2},children:[i(a,{variant:"h6",gutterBottom:!0,children:"Most Helpful Features"}),i(n,{display:"flex",flexWrap:"wrap",gap:1,children:Object.entries(M.topFeatures).sort(([,e],[,n])=>n-e).slice(0,6).map(([e,n])=>i(x,{label:`${e} (${n})`,color:"primary",variant:"outlined"},e))})]})})]}),e(b,{sx:{p:2},children:[i(a,{variant:"h6",gutterBottom:!0,children:"Individual Responses"}),i(R,{children:H.map((l,r)=>{var t,s,c;return e(S.Fragment,{children:[i(O,{button:!0,onClick:()=>{$(l),B(!0)},children:i(I,{primary:e(n,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e(n,{display:"flex",alignItems:"center",gap:2,children:[i(f,{value:l.overallRating,readOnly:!0,size:"small"}),i(x,{label:(null==(t=l.effectiveness)?void 0:t.replace("-"," "))||"N/A",size:"small",color:(null==(s=l.effectiveness)?void 0:s.includes("very-effective"))?"success":(null==(c=l.effectiveness)?void 0:c.includes("effective"))?"primary":"default"})]}),i(a,{variant:"caption",children:new Date(l.timestamp).toLocaleDateString()})]}),secondary:l.mostHelpful&&l.mostHelpful.length>0?`Most helpful: ${l.mostHelpful.substring(0,100)}...`:"No specific feedback provided"})}),r<H.length-1&&i(C,{})]},l.sessionId||r)})})]})]}),e(k,{open:W,onClose:()=>B(!1),maxWidth:"md",fullWidth:!0,children:[i(w,{children:"Detailed Feedback"}),i(j,{children:D&&i(n,{sx:{py:2},children:e(o,{container:!0,spacing:2,children:[e(o,{item:!0,xs:6,children:[i(a,{variant:"subtitle2",children:"Overall Rating:"}),i(f,{value:D.overallRating,readOnly:!0})]}),e(o,{item:!0,xs:6,children:[i(a,{variant:"subtitle2",children:"Ease of Use:"}),i(f,{value:D.easeOfUse,readOnly:!0})]}),e(o,{item:!0,xs:12,children:[i(a,{variant:"subtitle2",children:"Learning Effectiveness:"}),i(a,{children:null==(N=D.effectiveness)?void 0:N.replace("-"," ")})]}),e(o,{item:!0,xs:12,children:[i(a,{variant:"subtitle2",children:"Helpful Features:"}),i(n,{display:"flex",flexWrap:"wrap",gap:1,mt:1,children:null==(U=D.features)?void 0:U.map(e=>i(x,{label:e,size:"small"},e))})]}),e(o,{item:!0,xs:12,children:[i(a,{variant:"subtitle2",children:"Learning Progress:"}),i(a,{children:D.learningProgress||"Not provided"})]}),e(o,{item:!0,xs:12,children:[i(a,{variant:"subtitle2",children:"Most Helpful Feature:"}),i(a,{children:D.mostHelpful||"Not provided"})]}),e(o,{item:!0,xs:12,children:[i(a,{variant:"subtitle2",children:"Would Recommend:"}),i(a,{children:null==(z=D.wouldRecommend)?void 0:z.replace("-"," ")})]}),e(o,{item:!0,xs:12,children:[i(a,{variant:"subtitle2",children:"Suggested Improvements:"}),i(a,{children:D.improvements||"None provided"})]}),e(o,{item:!0,xs:12,children:[i(a,{variant:"subtitle2",children:"Additional Comments:"}),i(a,{children:D.comments||"None provided"})]})]})})}),i(E,{children:i(r,{onClick:()=>B(!1),children:"Close"})})]})]})};export{N as default};
